@page "/"
@using SharedLib.Services
@inject AppSettings AppSettings

<PageTitle>タイマー</PageTitle>

@if (AppSettings.UseNavigationLock)
{
    <NavigationLock OnBeforeInternalNavigation="OnBeforeInternalNavigation" />
}

<MudContainer MaxWidth="MaxWidth.Small">
    <MudGrid Class="mud-width-full" Spacing="1">
        <MudItem xs="12" Class="d-flex align-center justify-center py-16">
            <MudText Typo="Typo.h3">@_leftoverTimeText</MudText>
        </MudItem>

        <MudHidden Breakpoint="Breakpoint.SmAndDown" Invert="true">
            <MudItem xs="12">
                <MudButtonGroup Color="Color.Primary" Variant="Variant.Filled" Style="width: 100%" Class="mb-2">
                    <MudButton FullWidth Disabled="!_status.HourUpEnabled" OnClick="(() => KitchenTimer.Second.Value += 3600)">
                        Hour+
                    </MudButton>
                    <MudButton FullWidth Disabled="!_status.HourDownEnabled" OnClick="(() => KitchenTimer.Second.Value -= 3600)">
                        Hour-
                    </MudButton>
                </MudButtonGroup>

                <MudButtonGroup Color="Color.Primary" Variant="Variant.Filled" Style="width: 100%" Class="mb-2">
                    <MudButton FullWidth Disabled="!_status.MinUpEnabled" OnClick="(() => KitchenTimer.Second.Value += 60)">
                        Minute+
                    </MudButton>
                    <MudButton FullWidth Disabled="!_status.MinDownEnabled" OnClick="(() => KitchenTimer.Second.Value -= 60)">
                        Minute-
                    </MudButton>
                </MudButtonGroup>

                <MudButtonGroup Color="Color.Primary" Variant="Variant.Filled" Style="width: 100%" Class="mb-2">
                    <MudButton FullWidth Disabled="!_status.SecUpEnabled" OnClick="(() => KitchenTimer.Second.Value++)">
                    Second+
                </MudButton>
                <MudButton FullWidth Disabled="!_status.SecDownEnabled" OnClick="(() => KitchenTimer.Second.Value--)">
                    Second-
                </MudButton>
                </MudButtonGroup>
            </MudItem>
        </MudHidden>

        <MudHidden Breakpoint="Breakpoint.MdAndUp" Invert="true">
            <MudItem xs="12">
                <MudButtonGroup Color="Color.Primary" Variant="Variant.Filled" Style="width: 100%">
                    <MudButton FullWidth Disabled="!_status.HourUpEnabled" OnClick="(() => KitchenTimer.Second.Value += 3600)">
                        Hour+
                    </MudButton>
                    <MudButton FullWidth Disabled="!_status.HourDownEnabled" OnClick="(() => KitchenTimer.Second.Value -= 3600)">
                        Hour-
                    </MudButton>
                    <MudButton FullWidth Disabled="!_status.MinUpEnabled" OnClick="(() => KitchenTimer.Second.Value += 60)">
                        Minute+
                    </MudButton>
                    <MudButton FullWidth Disabled="!_status.MinDownEnabled" OnClick="(() => KitchenTimer.Second.Value -= 60)">
                        Minute-
                    </MudButton>
                    <MudButton FullWidth Disabled="!_status.SecUpEnabled" OnClick="(() => KitchenTimer.Second.Value++)">
                        Second+
                    </MudButton>
                    <MudButton FullWidth Disabled="!_status.SecDownEnabled" OnClick="(() => KitchenTimer.Second.Value--)">
                        Second-
                    </MudButton>
                </MudButtonGroup>
            </MudItem>
        </MudHidden>

        <MudItem xs="12">
            <MudButtonGroup Style="width: 100%" OverrideStyles="false">
                <MudButton FullWidth
                           Variant="Variant.Filled"
                           Color="Color.Success"
                           Disabled="!_status.StartStopEnabled"
                           OnClick="KitchenTimer.ToggleTimer">
                    @_toggleButtonText
                </MudButton>
                <MudButton FullWidth
                           Variant="Variant.Filled"
                           Color="Color.Secondary"
                           Disabled="!_status.ResetEnabled"
                           OnClick="(() => KitchenTimer.ResetTimer())">
                    Reset
                </MudButton>
            </MudButtonGroup>
        </MudItem>

        <MudItem xs="12" Class="d-flex align-center justify-center py-3">
            <MudSwitch
                @bind-Checked="@IsTimerGlobal.Value"
                Label="ページを離れても継続する"
                Color="Color.Primary"
                Disabled="KitchenTimer.Status.Value != TimerStatus.Stopped" />
        </MudItem>
    </MudGrid>
</MudContainer>